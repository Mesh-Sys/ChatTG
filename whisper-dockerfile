FROM ghcr.io/ggml-org/whisper.cpp:main
WORKDIR /app
RUN apt update
RUN apt install -y aria2c btop
RUN aria2c -x16 -s16 "https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-tiny.en-q5_1.bin" -o "/app/models/ggml-tiny.en-q5_1.bin"
RUN aria2c -x16 -s16 "https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-large-v3-turbo-q5_0.bin" -o "/app/models/ggml-large-v3-turbo-q5_0.bin"
RUN aria2c -x16 -s16 "https://huggingface.co/ggerganov/whisper.cpp/resolve/main/ggml-small.en-q8_0.bin" -o "/app/models/ggml-small.en-q8_0.bin"
EXPOSE 8080
CMD ["/app/build/bin/whisper-server", "--host", "0.0.0.0", "--model", "/app/models/ggml-tiny.en-q5_1.bin"]